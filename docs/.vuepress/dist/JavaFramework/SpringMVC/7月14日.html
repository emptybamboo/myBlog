<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第三天,p24-p29 | 学而时习之</title>
    <meta name="generator" content="VuePress 1.6.0">
    <link rel="icon" href="/img/qiyu.jpg">
    <meta name="description" content="个人学习博客">
    <link rel="preload" href="/assets/css/0.styles.764fb01f.css" as="style"><link rel="preload" href="/assets/js/app.b56b5bda.js" as="script"><link rel="preload" href="/assets/js/2.22c5cd06.js" as="script"><link rel="preload" href="/assets/js/10.1e76d9ca.js" as="script"><link rel="prefetch" href="/assets/js/11.6af0948b.js"><link rel="prefetch" href="/assets/js/12.9041d241.js"><link rel="prefetch" href="/assets/js/13.411f20f5.js"><link rel="prefetch" href="/assets/js/14.1f7eacc7.js"><link rel="prefetch" href="/assets/js/15.54c1be8f.js"><link rel="prefetch" href="/assets/js/16.b5e1607d.js"><link rel="prefetch" href="/assets/js/17.d771ed77.js"><link rel="prefetch" href="/assets/js/18.663bb4e5.js"><link rel="prefetch" href="/assets/js/19.0daa23af.js"><link rel="prefetch" href="/assets/js/20.195502ab.js"><link rel="prefetch" href="/assets/js/21.d050dedc.js"><link rel="prefetch" href="/assets/js/22.9f54f9ed.js"><link rel="prefetch" href="/assets/js/23.cb94193b.js"><link rel="prefetch" href="/assets/js/24.19ba60dd.js"><link rel="prefetch" href="/assets/js/25.98224f22.js"><link rel="prefetch" href="/assets/js/26.72e5915c.js"><link rel="prefetch" href="/assets/js/27.dd89f3cc.js"><link rel="prefetch" href="/assets/js/28.df484e57.js"><link rel="prefetch" href="/assets/js/29.18b6b3c1.js"><link rel="prefetch" href="/assets/js/3.98d5a830.js"><link rel="prefetch" href="/assets/js/30.d8414a40.js"><link rel="prefetch" href="/assets/js/31.c3f95a3d.js"><link rel="prefetch" href="/assets/js/32.31be87b3.js"><link rel="prefetch" href="/assets/js/33.994d131f.js"><link rel="prefetch" href="/assets/js/34.69f69c05.js"><link rel="prefetch" href="/assets/js/35.76bd139c.js"><link rel="prefetch" href="/assets/js/36.36155d32.js"><link rel="prefetch" href="/assets/js/37.beefeb05.js"><link rel="prefetch" href="/assets/js/38.a5fc69c6.js"><link rel="prefetch" href="/assets/js/39.936ac144.js"><link rel="prefetch" href="/assets/js/4.2e91fc91.js"><link rel="prefetch" href="/assets/js/40.cd7ef778.js"><link rel="prefetch" href="/assets/js/41.bb29d1d1.js"><link rel="prefetch" href="/assets/js/42.47ac0fc8.js"><link rel="prefetch" href="/assets/js/43.c0eafb49.js"><link rel="prefetch" href="/assets/js/44.7058c910.js"><link rel="prefetch" href="/assets/js/45.4a8fa05b.js"><link rel="prefetch" href="/assets/js/46.21bef9a3.js"><link rel="prefetch" href="/assets/js/47.e86d3cac.js"><link rel="prefetch" href="/assets/js/48.8d2ee7b1.js"><link rel="prefetch" href="/assets/js/49.a48d5964.js"><link rel="prefetch" href="/assets/js/5.48f17c75.js"><link rel="prefetch" href="/assets/js/50.1ce7b8e9.js"><link rel="prefetch" href="/assets/js/51.09664493.js"><link rel="prefetch" href="/assets/js/52.88f1f093.js"><link rel="prefetch" href="/assets/js/53.2ea7c2de.js"><link rel="prefetch" href="/assets/js/54.e15dd94e.js"><link rel="prefetch" href="/assets/js/55.ba664490.js"><link rel="prefetch" href="/assets/js/56.e0f891a7.js"><link rel="prefetch" href="/assets/js/57.57f7a97b.js"><link rel="prefetch" href="/assets/js/58.7429f7a3.js"><link rel="prefetch" href="/assets/js/59.c1094ee7.js"><link rel="prefetch" href="/assets/js/6.a1c52342.js"><link rel="prefetch" href="/assets/js/60.21c0558a.js"><link rel="prefetch" href="/assets/js/61.944d1d2b.js"><link rel="prefetch" href="/assets/js/62.8e8f7252.js"><link rel="prefetch" href="/assets/js/63.8d45f05c.js"><link rel="prefetch" href="/assets/js/7.09468979.js"><link rel="prefetch" href="/assets/js/8.eac43d81.js"><link rel="prefetch" href="/assets/js/9.992af581.js">
    <link rel="stylesheet" href="/assets/css/0.styles.764fb01f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">学而时习之</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文" class="dropdown-title"><span class="title">博文</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文" class="mobile-dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/VuePress/" class="nav-link">
  博客相关知识
</a></li><li class="dropdown-item"><!----> <a href="/javaBasics/" class="nav-link">
  JavaSE基础知识
</a></li><li class="dropdown-item"><!----> <a href="/JavaFramework/" class="nav-link router-link-active">
  Java框架知识
</a></li><li class="dropdown-item"><!----> <a href="/book/" class="nav-link">
  技术书籍
</a></li><li class="dropdown-item"><!----> <a href="/qianduan/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/SQL/" class="nav-link">
  数据库知识
</a></li><li class="dropdown-item"><!----> <a href="/ProjectPractice/" class="nav-link">
  项目实战
</a></li><li class="dropdown-item"><!----> <a href="/ProjectEx/" class="nav-link">
  工作项目积累
</a></li><li class="dropdown-item"><!----> <a href="/faultNote/" class="nav-link">
  记错本
</a></li><li class="dropdown-item"><!----> <a href="/PHP/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/linux/" class="nav-link">
  linux学习
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具网站" class="dropdown-title"><span class="title">工具网站</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具网站" class="mobile-dropdown-title"><span class="title">工具网站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://postimages.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  postimages图床
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文" class="dropdown-title"><span class="title">博文</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文" class="mobile-dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/VuePress/" class="nav-link">
  博客相关知识
</a></li><li class="dropdown-item"><!----> <a href="/javaBasics/" class="nav-link">
  JavaSE基础知识
</a></li><li class="dropdown-item"><!----> <a href="/JavaFramework/" class="nav-link router-link-active">
  Java框架知识
</a></li><li class="dropdown-item"><!----> <a href="/book/" class="nav-link">
  技术书籍
</a></li><li class="dropdown-item"><!----> <a href="/qianduan/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/SQL/" class="nav-link">
  数据库知识
</a></li><li class="dropdown-item"><!----> <a href="/ProjectPractice/" class="nav-link">
  项目实战
</a></li><li class="dropdown-item"><!----> <a href="/ProjectEx/" class="nav-link">
  工作项目积累
</a></li><li class="dropdown-item"><!----> <a href="/faultNote/" class="nav-link">
  记错本
</a></li><li class="dropdown-item"><!----> <a href="/PHP/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/linux/" class="nav-link">
  linux学习
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具网站" class="dropdown-title"><span class="title">工具网站</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具网站" class="mobile-dropdown-title"><span class="title">工具网站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://postimages.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  postimages图床
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>SpringMVC</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaFramework/SpringMVC/7月11日.html" class="sidebar-link">第一天</a></li><li><a href="/JavaFramework/SpringMVC/7月12日.html" class="sidebar-link">第二天</a></li><li><a href="/JavaFramework/SpringMVC/7月14日.html" class="active sidebar-link">第三天</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaFramework/SpringMVC/7月14日.html#第三天-p24-p29" class="sidebar-link">第三天,p24-p29</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaFramework/SpringMVC/7月14日.html#sessionattributes注解" class="sidebar-link">SessionAttributes注解</a></li><li class="sidebar-sub-header"><a href="/JavaFramework/SpringMVC/7月14日.html#响应之返回值是string类型" class="sidebar-link">响应之返回值是String类型</a></li><li class="sidebar-sub-header"><a href="/JavaFramework/SpringMVC/7月14日.html#响应之返回值是void类型" class="sidebar-link">响应之返回值是void类型</a></li><li class="sidebar-sub-header"><a href="/JavaFramework/SpringMVC/7月14日.html#响应之返回值是modelandview类型" class="sidebar-link">响应之返回值是ModelandView类型</a></li><li class="sidebar-sub-header"><a href="/JavaFramework/SpringMVC/7月14日.html#响应之使用forward和redirect进行页面跳转-用的比较少" class="sidebar-link">响应之使用forward和redirect进行页面跳转(用的比较少)</a></li></ul></li></ul></li><li><a href="/JavaFramework/SpringMVC/7月16日.html" class="sidebar-link">第四天</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="第三天-p24-p29"><a href="#第三天-p24-p29" class="header-anchor">#</a> 第三天,p24-p29</h2> <h3 id="sessionattributes注解"><a href="#sessionattributes注解" class="header-anchor">#</a> SessionAttributes注解</h3> <ul><li>这个注解和Session域对象也就是会话域对象有关,用于多次执行控制器方法间的参数共享.</li> <li>会话域对象可以经过多次请求Session一直都有,如果去存数据取数据,Session都可以用.</li> <li>写一个简单超链接</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>anno/testSessionAttributes<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>testSessionAttributes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>之后在controller中再写一个对应方法,起名testSessionAttributes</li> <li>超链接已经有了,点击超链接方法就执行,现在在方法中希望向request中存值,存完之后跳转到对应jsp页面,页面中我希望把request中的值取出.</li> <li>想获取原生Servlet API,就在方法的形参上加一个HttpServletRequest,方法中再调用request.setAttribute就可以,但这么做就和Servlet API耦合过于高,这样开发是不好的,如果没有Servlet API,程序在编译期都会报错.</li> <li>为了解决这个耦合,就提供了一些类来解决,比如Model:
<ul><li>这是一个接口,它有一些子接口,其中有一些实现类还有实现类的子类.</li> <li>如果真的向Model存数据,实际上会帮你把数据存到request域对象当中.</li></ul></li> <li>现在就可以在方法的形参中引入Model model,model.addAttribute,方法括号里传一个字符串的key,再传一个值(value),当这个写完现在就等于把一组键值对存到Model对象,底层帮你存到了request域对象当中,存完就会跳转到jsp页面.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;美美&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>在jsp中使用<code>${requestScope}</code>,这时jsp的el表达式中十一个域对象,这表示request域的一个map集合,如果这里面有刚才model.addAttribute中传的值,那model以后就可以用了,再也不用写request.</li> <li>SessionAttributes注解只能作用到类上,所以就在controller的类上加上@SessionAttributes注解,需要填括号中的属性,value={&quot;&quot;},假如value中和model.addAttribute一样存入msg,那就等于把msg=&quot;美美&quot;存到了session域中.</li> <li>如果存到了session域,转发jsp页面可以写<code>${sessionScope}</code>,如果再去发请求,request域和session都会有这个内容.</li> <li>最开始说过这个方法是用于方法间参数共享,如果存到了session域了,那就再写一个方法试着从session域把值取出.</li> <li>试着用model.get开头的方法,发现好像没有,形参中写的Model是接口,真正运行的是实现类,所以把形参中Model改为ModelMap,使用<code>ModelMap.get(&quot;msg&quot;)</code>,它就会返回一个字符串msg给我们<code>String msg = ModelMap.get(&quot;msg&quot;)</code>,如果报错就加一个强转,使用sout输出msg.</li> <li>回到jsp页面写一个超链接,如果点击,IDEA控制台会输出键值对的值也就是美美</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>anno/getSessionAttributes<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>getSessionAttributes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>如果你想把值删掉该怎么做呢?
<ul><li>在controller中再写一个方法,delSessionAttributes.</li> <li>如果想删掉,有一个对象叫SessionStatus,把它写在形参中.</li> <li>它其中有一个方法status.setComplete,翻译为设置完成,它就会把Session中东西给清除掉.</li></ul></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>anno/delSessionAttributes<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>delSessionAttributes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>在jsp页面再加一个删除的超链接,先点击第一个存值的超链接,点击之后再返回点击第二个超链接取值,控制台输出美美,再返回页面点击第三个,就会删掉值,这样的话再次返回页面,点击取值超链接,IDEA中会输出null,说明值已经清除掉了.</li></ul> <h3 id="响应之返回值是string类型"><a href="#响应之返回值是string类型" class="header-anchor">#</a> 响应之返回值是String类型</h3> <ul><li>在webapp文件夹下新建response.jsp,写一个超链接:</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user/testString<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>testString<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>后台(controller中)应该写一个方法,创建UserController,为了把类交给容器管理,加上注解@Controller,第二个注解标明一级请求目录,@RequsetMapping(&quot;/user&quot;),然后在Controller中写一个testString的请求方法.<code>return success</code>,然后在方法上加二级目录@RequsetMapping(&quot;/testString&quot;).</li> <li>写好User实体类,实现序列化接口Serializable,写上三个数据,username,password,age,加上get/set方法.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span><span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> username<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>username <span class="token operator">=</span> username<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> password<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">=</span> password<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>controller中的testString方法里模拟从数据库中查询出User对象,然后把对象存起来转发到页面,从页面可以取值.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/testString&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testString</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;testString方法执行了...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 模拟从数据库中查询出User对象</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;美美&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// model对象</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><ul><li>用new对象然后set模拟取值,然后用model对象存起来</li> <li>写完之后返回成功跳转到jsp页面,在页面上可以从request域中把值取出.</li> <li>在页面中写上<code>${user.username}</code>,<code>${user.password}</code>来取值.</li> <li>启动项目,点击超链接发送请求,跳转页面后取到值.</li></ul> <h3 id="响应之返回值是void类型"><a href="#响应之返回值是void类型" class="header-anchor">#</a> 响应之返回值是void类型</h3> <ul><li>jsp页面插入超链接</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user/testVoid<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>testVoid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>之后回到controller写一个对应方法--testVoid.</li> <li>现在方法最后没有return,就不会跳到success页面,点击之后会报404,但是方法执行了的,因为方法中的sout输出到了IDEA的控制台.</li> <li>通过报错信息发现,如果你没写return,默认会去请求&quot;请求路径&quot;名称的jsp文件(比如类的@RequestMapping(&quot;/user&quot;),这就是一级目录,对应方法的@RequestMapping(&quot;/testVoid&quot;),这是二级目录).也就是到你视图解析器中配置的地址下去找<code>/user/testVoid.jsp</code>,也就是<code>/WEB-INF/pages//user/testVoid.jsp</code>.</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prefix<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/WEB-INF/pages/<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>suffix<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.jsp<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><ul><li>如果想提供的话,需要在/WEB-INF/pages/中再新建user文件夹,再在user文件夹中写testVoid.jsp.</li> <li>如果你不想这么做还想返回void怎么办?就要用到request,response.</li> <li>在形参中写<code>HttpServletRequest request</code>,在方法中自己去编写请求转发的程序.就得在形参中再添加<code>HttpServletResponse response</code>.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/WEB-INF/pages/success.jsp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span>
</code></pre></div><ul><li>请求转发是一次请求,getRequestDispatcher方法中不用编写项目的名称.</li> <li>手动调转发方法不会执行视图解析器,所以需要你自己提供完整目录<code>/WEB-INF/pages/success.jsp</code>.</li> <li>当转发写完,如果后边有代码它还会继续执行,如果你不想让后边代码执行可以加一个return.</li> <li>再启动项目点击超链接,不会再报404,而是跳转到success页面.</li></ul> <hr> <ul><li>使用重定向,是两次请求,需要写项目名字<code>request.getContextPath()+&quot;/index.jsp&quot;</code></li> <li>index.jsp中写一个标题.标明你进入这页面是重定向过来的.</li> <li>怎么证明重定向了呢?当你请求发出,这是一次请求,地址会变一次,重定向去请求index.jsp,你的地址还会发生一次变化.</li></ul> <hr> <ul><li>以后有可能直接进行响应.</li> <li>之前的请求转发和重定向都是先跳转到jsp,然后由tomcat服务器生成html最终帮你响应给用户.</li> <li>还有一种情况,你直接发请求,我的控制器直接通过输出流把数据直接响应给你的浏览器.</li> <li>在方法中写直接响应方法,当然如果你想直接写中文,得解决响应的中文乱码,去设置.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code> <span class="token comment">// 设置中文乱码</span>
        response<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 直接会进行响应</span>
        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;你好&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>直接访问路径:<code>项目根路径+user/testVoid</code>,页面上就会直接输出<code>你好</code>.</li></ul> <h3 id="响应之返回值是modelandview类型"><a href="#响应之返回值是modelandview类型" class="header-anchor">#</a> 响应之返回值是ModelandView类型</h3> <ul><li>这个对象是SpringMVC提供的对象.</li> <li>jsp页面写一个超链接</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user/testModelAndView<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>testModelAndView<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>后台controller写相应方法testModelAndView,标注注解<code>@RequestMapping(&quot;/testModelAndView&quot;)</code>,方法返回值写为ModelAndView,返回值return mv;暂时没有这个变量,一会儿再去创建.</li> <li>方法中第一步创建ModelAndView,因为是SpringMVC提供的,直接new就可以.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ModelAndView</span> mv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>可以调用方法中提供的方法,第一种设置键值对,第二种设置视图名称,视图名称决定往哪里跳,具体在哪个目录的页面用到了视图解析器.因为返回了mv这个对象就会使用视图解析器帮你跳转到<code>/WEB-INF/pages/</code>去找jsp.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>        <span class="token comment">// 把user对象存储到mv对象中，也会把user对象存入到request对象</span>
        mv<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 跳转到哪个页面</span>
        mv<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>其实和返回String没法区别,写法有点不一样,返回String底层使用的也是ModelAndView方式.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/testModelAndView&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">testModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 创建ModelAndView对象</span>
        <span class="token class-name">ModelAndView</span> mv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;testModelAndView方法执行了...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 模拟从数据库中查询出User对象</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;小凤&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 把user对象存储到mv对象中，也会把user对象存入到request对象</span>
        mv<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 跳转到哪个页面</span>
        mv<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> mv<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><ul><li>重新部署项目,进入response.jsp,点击超链接,username和password就会显示在页面.</li></ul> <h3 id="响应之使用forward和redirect进行页面跳转-用的比较少"><a href="#响应之使用forward和redirect进行页面跳转-用的比较少" class="header-anchor">#</a> 响应之使用forward和redirect进行页面跳转(用的比较少)</h3> <ul><li>当你用关键字去进行转发或重定向的时候,是用不了视图解析器的,具体路径需要自己写正确.</li> <li>jsp页面添加超链接</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user/testForwardOrRedirect<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>testForwardOrRedirect<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>return后面的字符串开头加<code>forward:</code>就表明你现在想使用请求转发,现在不能使用时视图解析器,就得跟在后面自己把页面地址写正确,这就是用关键字的方式自己来写请求转发.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">return</span> <span class="token string">&quot;forward:/WEB-INF/pages/success.jsp&quot;</span>
</code></pre></div><ul><li>部署项目,点击超链接,跳转完成.这就是转发方式.</li></ul> <hr> <ul><li>重定向方式</li> <li>return后面的字符串开头加<code>redirect:</code>,跟在后面自己把根目录页面地址写正确.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 重定向</span>
        <span class="token keyword">return</span> <span class="token string">&quot;redirect:/index.jsp&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>之前说重定向的路径上要加项目名称,但是这里没加,先试一下能不能跳转.</li> <li>点击超链接,发现可以跳转到index.jsp,说明这里不加项目名也ok,底层帮你已经加上了.</li> <li>以后用关键字去做重定向时,不用加项目名称,框架已经帮你加好了.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/JavaFramework/SpringMVC/7月12日.html" class="prev">
        第二天
      </a></span> <span class="next"><a href="/JavaFramework/SpringMVC/7月16日.html">
        第四天
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b56b5bda.js" defer></script><script src="/assets/js/2.22c5cd06.js" defer></script><script src="/assets/js/10.1e76d9ca.js" defer></script>
  </body>
</html>
